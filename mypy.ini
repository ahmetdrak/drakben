[mypy]
python_version = 3.12

# ── Strict mode fundamentals ──
warn_return_any = True
warn_unused_ignores = True
warn_unused_configs = True
warn_redundant_casts = True
warn_unreachable = True
strict_equality = True
show_error_codes = True
show_error_context = True
pretty = True

# Third-party stubs not always available
ignore_missing_imports = True

# ── Error codes: enable most, disable only the truly unavoidable ──
# We now only disable 3 codes (down from 12):
#   import-untyped — many pentest libs lack stubs
#   misc           — overly broad catch-all for edge cases
#   type-var       — advanced generic patterns in LLM pipeline
disable_error_code = import-untyped, misc, type-var

# ── Per-module overrides: fully strict modules ──
[mypy-core.agent.state]
disallow_untyped_defs = True
disallow_untyped_calls = True
check_untyped_defs = True

[mypy-core.config]
disallow_untyped_defs = True
check_untyped_defs = True

[mypy-core.events]
disallow_untyped_defs = True
disallow_untyped_calls = True
check_untyped_defs = True

[mypy-core.observability]
disallow_untyped_defs = True
check_untyped_defs = True

[mypy-core.knowledge_graph]
disallow_untyped_defs = True
check_untyped_defs = True

[mypy-core.execution.sandbox_manager]
disallow_untyped_defs = True
check_untyped_defs = True

[mypy-core.agent.tool_dispatch]
disallow_untyped_defs = True
disallow_untyped_calls = True
check_untyped_defs = True

[mypy-core.agent.multi_agent]
disallow_untyped_defs = True
check_untyped_defs = True

[mypy-core.llm.llm_engine]
disallow_untyped_defs = True
check_untyped_defs = True

[mypy-core.llm.token_counter]
disallow_untyped_defs = True
check_untyped_defs = True

[mypy-core.llm.output_models]
disallow_untyped_defs = True
check_untyped_defs = True

# ── Third-party libraries without stubs ──
[mypy-requests.*]
ignore_missing_imports = True

[mypy-paramiko.*]
ignore_missing_imports = True

[mypy-aiofiles.*]
ignore_missing_imports = True

[mypy-curl_cffi.*]
ignore_missing_imports = True

[mypy-PIL.*]
ignore_missing_imports = True

[mypy-bs4.*]
ignore_missing_imports = True

[mypy-chromadb.*]
ignore_missing_imports = True

[mypy-rich.*]
ignore_missing_imports = True

[mypy-prompt_toolkit.*]
ignore_missing_imports = True

[mypy-dnspython.*]
ignore_missing_imports = True

[mypy-whois.*]
ignore_missing_imports = True

[mypy-Crypto.*]
ignore_missing_imports = True

[mypy-keyring.*]
ignore_missing_imports = True

[mypy-tiktoken.*]
ignore_missing_imports = True
